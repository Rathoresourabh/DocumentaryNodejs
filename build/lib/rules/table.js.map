{"version":3,"sources":["../../../src/lib/rules/table.js"],"names":["LOG","replacer","match","table","t","trim","res","JSON","parse","header","rows","a","getRow","map","length","repeat","join","err","row","s","re","tableRule","replacement"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,MAAM,oBAAS,KAAT,CAAZ;;AAEO,MAAMC,WAAW,CAACC,KAAD,EAAQC,KAAR,KAAkB;AACxC,QAAMC,IAAID,MAAME,IAAN,EAAV;;AACA,MAAI;AACF,UAAMC,MAAMC,KAAKC,KAAL,CAAWJ,CAAX,CAAZ;AACA,UAAM,CAACK,MAAD,EAAS,GAAGC,IAAZ,IAAoBJ,GAA1B;AACA,UAAMK,IAAI,CACRC,OAAOH,MAAP,CADQ,EAERG,OAAOH,OAAOI,GAAP,CAAW,CAAC;AAAEC;AAAF,KAAD,KAAgB,IAAIC,MAAJ,CAAWD,MAAX,CAA3B,CAAP,CAFQ,EAGR,GAAGJ,KAAKG,GAAL,CAASD,MAAT,CAHK,CAAV;AAKA,WAAOD,EAAEK,IAAF,CAAO,IAAP,CAAP;AACD,GATD,CASE,OAAOC,GAAP,EAAY;AACZjB,QAAI,4BAAJ;AACA,WAAOE,KAAP;AACD;AACF,CAfM;;;;AAiBP,MAAMU,SAAUM,GAAD,IAAS;AACtB,QAAMC,IAAK,KAAID,IAAIF,IAAJ,CAAS,KAAT,CAAgB,IAA/B;AACA,SAAOG,CAAP;AACD,CAHD;;AAKA,MAAMC,KAAK,yBAAX;;AAEA,MAAMC,YAAY;AAChBD,IADgB;AAEhBE,eAAarB;AAFG,CAAlB;eAOeoB,S","sourcesContent":["import { debuglog } from 'util'\n\nconst LOG = debuglog('doc')\n\nexport const replacer = (match, table) => {\n  const t = table.trim()\n  try {\n    const res = JSON.parse(t)\n    const [header, ...rows] = res\n    const a = [\n      getRow(header),\n      getRow(header.map(({ length }) => '-'.repeat(length))),\n      ...rows.map(getRow),\n    ]\n    return a.join('\\n')\n  } catch (err) {\n    LOG('Could not parse the table.')\n    return match\n  }\n}\n\nconst getRow = (row) => {\n  const s = `| ${row.join(' | ')} |`\n  return s\n}\n\nconst re = /```table([\\s\\S]+?)```/mg\n\nconst tableRule = {\n  re,\n  replacement: replacer,\n}\n\nexport { re as tableRe }\n\nexport default tableRule\n"],"file":"table.js"}