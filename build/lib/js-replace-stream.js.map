{"version":3,"sources":["../../src/lib/js-replace-stream.js"],"names":["JSReplaceable","Replaceable","constructor","typedefJsRule","JSDocRule","_types","on","typedefs","addTypes","typedefsHash","reduce","acc","typedef","name","types","createJsReplaceStream","s"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,aAAN,SAA4BC,qBAA5B,CAAwC;AACtCC,gBAAc;AACZ,UAAM,CACJC,kBADI,EAEJC,cAFI,CAAN;AAIA,SAAKC,MAAL,GAAc,EAAd;AAEA,SAAKC,EAAL,CAAQ,OAAR,EAAiBC,YAAY;AAC3B,WAAKC,QAAL,CAAcD,QAAd;AACD,KAFD;AAGD;AACD;;;;;;AAIAC,WAASD,QAAT,EAAmB;AACjB,UAAME,eAAeF,SAASG,MAAT,CAAgB,CAACC,GAAD,EAAMC,OAAN,KAAkB;AACrD,aAAO,EACL,GAAGD,GADE;AAEL,SAACC,QAAQC,IAAT,GAAgBD;AAFX,OAAP;AAID,KALoB,EAKlB,EALkB,CAArB;AAMA,SAAKP,MAAL,GAAc,EACZ,GAAG,KAAKA,MADI;AAEZ,SAAGI;AAFS,KAAd;AAID;AACD;;;;;AAGA,MAAIK,KAAJ,GAAY;AACV,WAAO,KAAKT,MAAZ;AACD;;AAjCqC;AAoCxC;;;AAEe,SAASU,qBAAT,GAAiC;AAC9C,QAAMC,IAAI,IAAIhB,aAAJ,EAAV;AAEA,SAAOgB,CAAP;AACD","sourcesContent":["import { Replaceable } from 'restream'\nimport typedefJsRule from './rules/typedef-js'\nimport JSDocRule from './typedef/jsdoc'\n\nclass JSReplaceable extends Replaceable {\n  constructor() {\n    super([\n      typedefJsRule,\n      JSDocRule,\n    ])\n    this._types = {}\n\n    this.on('types', typedefs => {\n      this.addTypes(typedefs)\n    })\n  }\n  /**\n   * Add types emited during typedefJsRule replacement.\n   * @param {Type[]} typedefs\n   */\n  addTypes(typedefs) {\n    const typedefsHash = typedefs.reduce((acc, typedef) => {\n      return {\n        ...acc,\n        [typedef.name]: typedef,\n      }\n    }, {})\n    this._types = {\n      ...this._types,\n      ...typedefsHash,\n    }\n  }\n  /**\n   * @type {Object.<string, Type>}\n   */\n  get types() {\n    return this._types\n  }\n}\n\n/** @typedef {import('./typedef/Type').default} Type */\n\nexport default function createJsReplaceStream() {\n  const s = new JSReplaceable()\n\n  return s\n}"],"file":"js-replace-stream.js"}